<!DOCTYPE html><html><head><title>Computed</title><meta name="viewport" content="width=device-width, initial-scale=1"><link href="images/favicon.ico" rel="shortcut icon"><meta charset="UTF-8"><script src="/javascripts/vendor.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.2.37/vue.global.js"></script></head><body class="bg-lighter">
<div class="container main my-5"><div class="row"><main class="col post">
<!-- ç« ç¯€æ¨™é¡Œ --><div class="mb-4"><h1 class="mt-0 text-muted">Computed</h1><small>æª”åï¼š<code>options-computed.html</code></small></div>
<!-- ğŸ”¥ğŸ”¥ç·´ç¿’é–‹å§‹ğŸ”¥ğŸ”¥ -->

<div id="app">
	
	<h2>ç¶å®šç•«é¢</h2>
	<p>åŸ·è¡Œ computed test1()ï¼š{{ test1 }}</p>
	<button type="button" @click="test1 = 'aaa'">æ›´æ–°</button>
	<p>å› ç‚ºé€™é‚Šçš„ computed ç‚ºå‡½å¼ï¼Œåªèƒ½è®€ä¸èƒ½å¯«ï¼Œå› æ­¤æœƒç™¼ç”ŸéŒ¯èª¤ï¼š<br>Write operation failed: computed property "test1" is readonly.</p>
	
	<br><hr><br>
	
	<h2>Computed å¸¸è¦‹æŠ€å·§ - æœå°‹</h2>
	<input type="search" v-model="search">
	
	<h3>èœå–®</h3>
	<ul>
		<li v-for="item in filterProducts">
			{{ item.name }} / {{ item.price }}
		</li>
	</ul>
	
	<br><hr><br>
	
	<h2>Computed å°‡ç›®å‰çš„æ•¸å€¼é‹ç®—å‘ˆç¾è‡³ç•«é¢ä¸Š</h2>
	
	<h3>èœå–®</h3>
	<ul>
		<li v-for="product in products">
			{{ product.name }} / {{ product.price }}&nbsp;
			<button type="button" @click="addToCart(product)">åŠ å…¥è³¼ç‰©è»Š</button>
		</li>
	</ul>
	
	<h3>è³¼ç‰©è»Šé …ç›®</h3>
	<ul>
		<li v-for="item in carts">{{ item.name }}</li>
	</ul>
	total çš„å€¼ï¼š{{ total }}<br>
	
</div>

<br><hr><br>

<div id="app2">
	<h2>æ‰¿ä¸Šè³¼ç‰©è»Šï¼Œè¨ˆç®—æŠ˜æ‰£å¾Œé‡‘é¡</h2>
	<p>Computed Getter, Setter æ¸¬è©¦</p>
	<br>
	ç¸½è¨ˆï¼š{{ amount }}<br>
	æŠ˜æ‰£ï¼š
	<input type="number" v-model.number="discount">&nbsp;
	<button type="button" @click="amount = discount">è¨ˆç®—</button>
	<br>
	æŠ˜æ‰£å¾Œé‡‘é¡ï¼š{{ sum }}
</div>

<br>


<script>

const products = [
	{
		name: 'è”¥è›‹',
		price: 20,
		vegan: false
	},
	{
		name: 'è›‹é¤…',
		price: 30,
		vegan: false
	},
	{
		name: 'èµ·å¸è›‹é¤…',
		price: 35,
		vegan: false
	},
	{
		name: 'ç«è…¿è›‹é¤…',
		price: 40,
		vegan: false
	},
	{
		name: 'é£¯ç³°',
		price: 35,
		vegan: false
	},
	{
		name: 'å°ç± åŒ…',
		price: 60,
		vegan: false
	},
	{
		name: 'è˜¿è””ç³•',
		price: 30,
		vegan: true
	},
];

const cartsA = [];

function count() {
	console.log(`count() ......`);
	return this.carts.reduce((accu, item) => accu + item.price, 0);
}


/*
	1. Vue ç‰©ä»¶è£¡é¢ä¸èƒ½ç›´æ¥ä½¿ç”¨å¤–é¢çš„æ±è¥¿ï¼Œæ‰€ä»¥å³ä½¿åœ¨å¤–é¢å®šç¾©äº†è®Šæ•¸åŠ functionï¼Œä¹Ÿå¾—æ‹‰é€²ä¾†è‡ªå·±ä¸€ä»½ã€‚
	2. è€Œæ‹‰é€²ä¾†çš„ç‰©ä»¶ï¼Œå°å…¶æ“ä½œä¹Ÿæœƒé€£å¸¶æ”¹è®Šå¤–é¢çš„ç‰©ä»¶ (ç‰©ä»¶å‚³åƒè€ƒ)ã€‚
	3. å› æ­¤ç•¶å¤šå€‹ Vue ç‰©ä»¶æƒ³è¦å…±ç”¨åŒä¸€ä»½è³‡æ–™æ™‚ï¼Œå¯ä»¥åœ¨å¤–é¢å®šç¾©å¥½ç‰©ä»¶ï¼Œå†å„è‡ªæ‹‰é€²ä¾†ã€‚(ä½†é€™ç¨®ä½œæ³•ä¸çŸ¥é“æ˜¯ä¸æ˜¯æ­£è¦ä½œæ³•ï¼Œé€™é‚Šåƒ…ç”¨ä¾†é©—è­‰æ­¤ç‰¹æ€§)
*/
const App = {
	data() {
		return {
			search: '',
			products,
			carts: cartsA,
		}
	},
	computed: {
		test1() {
			console.log(``);
			console.log(`========== computed test1() ==========`);
			return `æˆ‘æ˜¯ test1`;
		},
		filterProducts() {
			console.log(``);
			console.log(`========== computed filterProducts() ==========`);
			console.log(`search ==>`, this.search);
			
			// indexOf
			// const result = this.products.filter(item => item.name.indexOf(this.search) >= 0);
			
			// match
			// const result = this.products.filter(item => item.name.match(this.search));
			
			// includes
			const result = this.products.filter(item => item.name.includes(this.search));
			
			console.log(`result ==>`, result);
			return result;
		},
		total() {
			console.log(``);
			console.log(`========== computed total() ==========`);
			// return this.carts.reduce((accu, item) => accu + item.price, 0);
			return this.count();
		},
	},
	methods: {
		addToCart(product) {
			this.carts.push(product)
		},
		count
	},
	created() {
		console.log(``);
		console.log(`App1 Created ==>`, this);
	}
};
Vue.createApp(App).mount('#app');


const App2 = {
	data() {
		return {
			carts: cartsA,
			totalCount: 0,
			discount: 0.5,
			sum: 0
		}
	},
	computed: {
		amount: {
			get() {
				console.log(``);
				console.log(`========== amount.get() ==========`);
				// this.totalCount = this.carts.reduce((accu, item) => accu + item.price, 0);
				this.totalCount = this.count();
				return this.totalCount;
			},
			set(val) {
				console.log(``);
				console.log(`========== amount.set() ==========`);
				console.log(`amount set() val = ${val}, discount = ${this.discount}`);
				this.sum = this.totalCount * val;
				console.log(`sum = ${this.sum}`);
			}
		},
	},
	methods: {
		count,
		setTest11(val) {
			this.test11 = val;
		}
	},
	created() {
		console.log(``);
		console.log(``);
		console.log(`App2 Created ==>`, this);
	}
};
Vue.createApp(App2).mount('#app2');

</script>


<!-- ğŸ™‡ğŸ™‡ç·´ç¿’çµæŸğŸ™‡ğŸ™‡ -->
</main>
  
    <aside
      class="col-md-3"><div class="sticky-top" style="top: 76px">
  <div class="list-group">
  
    <a href="/optionsApi/options-api.html"
      class="list-group-item list-group-item-action
        
        ">
      option API
    </a>
  
    <a href="/optionsApi/options-methods.html"
      class="list-group-item list-group-item-action
        
        ">
      Methods
    </a>
  
    <a href="/optionsApi/options-computed.html"
      class="list-group-item list-group-item-action
        
        active">
      Computed
    </a>
  
    <a href="/optionsApi/options-watch.html"
      class="list-group-item list-group-item-action
        
        ">
      Watch
    </a>
  
    <a href="/optionsApi/options-life-cycle.html"
      class="list-group-item list-group-item-action
        
        ">
      å…ƒä»¶ç”Ÿå‘½é€±æœŸ
    </a>
  
    <a href="/optionsApi/options-final.html"
      class="list-group-item list-group-item-action
        
        ">
      ç« ç¯€æŒ‘æˆ°
    </a>
  
  </div>
  <div class="mt-3 text-end p-2 bg-light rounded">
    <small class="text-black-50 fw-light mb-0">æ–‡ä»¶ç‰ˆæœ¬ï¼š2022/11/1</small>
  </div>
</div>

</aside>
    
  </div>
</div>

<nav class="navbar fixed-top navbar-expand-sm navbar-dark bg-secondary">
  <div class="container-fluid">
    <a class="navbar-brand" href="/">Vue 3 ç·´ç¿’æ‰‹å†Š</a>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav">
        <li class="nav-item active">
          <a class="nav-link " href="/es6/shorthand.html">JS å¿…å‚™è§€å¿µ</a>
        </li>
        <li class="nav-item">
          <a class="nav-link " href="/intro/createApp.html">èªè­˜ Vue.js</a>
        </li>
        <li class="nav-item">
          <a class="nav-link " href="/template/v-text.html">æ¨¡æ¿</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="/optionsApi/options-methods.html">æ–¹æ³•</a>
        </li>
        <li class="nav-item">
          <a class="nav-link " href="/components/component_register.html">å…ƒä»¶</a>
        </li>
        <li class="nav-item">
          <a class="nav-link " href="/advApi/adv-refs.html">é€²éš</a>
        </li>
        <li class="nav-item">
          <a class="nav-link " href="/router/vue-router.html">è·¯ç”±</a>
        </li>
        <li class="nav-item">
          <a class="nav-link " href="/composition/proxy.html">Composition API</a>
        </li>
        <li class="nav-item">
          <a class="nav-link " href="/pinia/layout.html">Pinia</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<footer class="footer py-2 bg-light">
  <div class="container text-center">
    <small class="text-black-50 fw-light mb-0">å…­è§’å­¸é™¢ Vue èª²ç¨‹å°ˆå±¬æ–‡ä»¶</small>
  </div>
</footer>
<link rel="stylesheet" href="/stylesheets/all.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
</body>
</html>
